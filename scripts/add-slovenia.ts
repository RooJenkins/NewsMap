import 'dotenv/config'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

const SLOVENIA_SUMMARY = {
  name: 'Slovenia',
  type: 'country',
  lat: 46.1512,
  lng: 14.9955,
  country: 'Slovenia',
  summary: `Slovenia in November 2025 is a country grappling with a security crisis that's exposed deep fractures in its political fabric and forced a reckoning about integration, identity, and state capacity. Prime Minister Robert Golob's centre-left government, elected in 2022 on promises of green transition and European values, finds itself besieged after a Roma-linked murder in Novo Mesto triggered mass protests and forced the resignation of both the interior and justice ministers. Thousands took to the streets accusing the government of abandoning citizens to lawlessness in southeastern regions where tensions between Roma communities and ethnic Slovenes have simmered for years. Golob's response—the rushed "Šutar Act" emergency legislation expanding police powers and lowering the age of criminal responsibility—has sparked fierce debate about whether Slovenia is addressing legitimate security concerns or scapegoating a marginalized minority. This crisis comes as Slovenia positions itself as a passionate advocate for EU enlargement in the Western Balkans, welcoming the 2025 Enlargement Package while condemning Georgia's democratic backsliding. But the contradiction is stark: Slovenia preaches European values abroad while its domestic politics turn increasingly punitive and divisive. The economy remains in "excellent shape" according to Golob, with growth exceeding EU averages and successful international bond issues, but this macroeconomic stability sits uneasily against a political landscape fracturing over migration, security, and ethnic tensions. Slovenia, long seen as Central Europe's success story—a prosperous, stable EU member that smoothly transitioned from Yugoslavia—is discovering that prosperity doesn't immunize against the politics of fear. November 2025 marks a moment when Slovenia's self-image as a tolerant, progressive European nation collides with harder questions about who belongs, what security means, and whether liberal governance can survive populist pressure.

**The Big Issue 1: The Novo Mesto Tragedy and Slovenia's Security Panic**

Let's start with the event that detonated Slovenia's political crisis. On October 30, 2025, Aleš Šutar, a 48-year-old man, was fatally assaulted in Novo Mesto by a member of the Roma community. Šutar died from severe head trauma, and the incident immediately became a flashpoint. Within days, thousands of protesters flooded the streets of Ljubljana and southeastern towns, holding signs demanding government accountability and chanting for Prime Minister Golob's resignation. The protests weren't just about one death—they tapped into years of accumulated frustration in southeastern Slovenia, where residents have long complained about crime, property disputes, and tensions with Roma settlements. Many ethnic Slovenes in these regions feel the state has failed to maintain order, and the Šutar killing became emblematic of that perceived abandonment.

The political fallout was swift and brutal. Interior Minister Boštjan Poklukar and Justice Minister Dominika Švarc Pipan both resigned, citing their "objective responsibility" for the deteriorating security situation. This wasn't a routine cabinet shuffle—it was a capitulation to street pressure and an admission that Golob's government had lost control of the narrative. Golob responded with emergency legislation: the Draft Act on Measures to Ensure Public Safety, quickly dubbed the "Šutar Act." The package includes amendments to the Juvenile Criminal Justice Act, lowering the age of criminal responsibility, expanding police detention powers, and increasing penalties for repeat offenders. The government framed these measures as necessary to restore public safety and address legitimate concerns about crime in vulnerable regions.

But the politics here are toxic and complicated. The Roma community in Slovenia, numbering around 10,000-12,000, has faced systemic marginalization, housing discrimination, educational barriers, and economic exclusion for decades. Many Roma settlements lack basic infrastructure—paved roads, sewage systems, reliable electricity. Employment discrimination is rampant, and Roma children often attend segregated schools or drop out entirely. This marginalization breeds poverty, which in turn fuels crime and social dysfunction—a vicious cycle that successive Slovenian governments have failed to break. When crimes involving Roma perpetrators make headlines, they ignite ethnic tensions that politicians exploit. Right-wing parties and local mayors have long campaigned on "law and order" platforms that implicitly or explicitly target Roma communities, promising tougher policing and stricter controls.

The Šutar Act plays directly into this dynamic. Human rights organizations and Roma advocacy groups have condemned the legislation as reactionary, warning that it will disproportionately target Roma youth and entrench discrimination without addressing root causes like poverty, housing, or education. Civil society groups argue that lowering the age of criminal responsibility criminalizes children who should be receiving social services, not police intervention. But Golob's government, facing electoral pressure and hemorrhaging support in rural and southeastern regions, chose expediency over principle. The Act passed quickly, with little meaningful consultation with affected communities.

This is Slovenia's dirty secret: a country that prides itself on European values and liberal governance has a glaring blind spot when it comes to its Roma population. The November crisis exposed that hypocrisy. Slovenia can advocate for Western Balkans integration and condemn authoritarian backsliding abroad, but at home, it's willing to sacrifice minority rights and due process to appease populist anger. The risk now is that this crisis becomes a precedent—that fear-driven policymaking replaces evidence-based reform, and that Slovenia's Roma community becomes a permanent political scapegoat.

**The Big Issue 2: EU Enlargement Champion—Slovenia's Western Balkans Evangelism**

Now let's pivot to Slovenia's international posture, because November 2025 also saw Ljubljana doubling down on its role as a champion of EU enlargement. On November 4, the Slovenian government issued a statement warmly welcoming the 2025 Enlargement Package and reaffirming its commitment to supporting candidate countries in the Western Balkans. Slovenia's Foreign Ministry specifically praised Montenegro for making "significant progress and achieving tangible results," noting that Montenegro has closed four additional negotiating chapters and now leads the pack among accession candidates. Slovenia's position is clear: enlargement will strengthen the EU, and the Western Balkans belong in the European family.

This enthusiasm isn't just diplomatic boilerplate—it's strategic calculation. Slovenia shares deep historical, cultural, and economic ties with the region. It was part of Yugoslavia until 1991, and many Slovenes maintain family, business, and linguistic connections to Croatia, Serbia, Bosnia-Herzegovina, and other successor states. Slovenia also benefits economically from regional stability: Slovenian companies invest heavily in Balkans markets, and trade flows are significant. But there's also an ideological dimension. Slovenia sees itself as a model for post-communist transition—a country that successfully navigated EU and NATO accession, built functioning democratic institutions, and achieved Central European prosperity. By supporting Balkans enlargement, Slovenia reinforces its own success narrative and positions itself as a mentor to aspiring members.

The November statement also included a pointed critique of Georgia, where Slovenia "follows the situation with deep concern." The Foreign Ministry agreed with the European Commission's assessment that 2025 witnessed "a serious setback to Georgia's democratic processes," resulting in the suspension of accession talks. This condemnation reflects Slovenia's alignment with the EU mainstream on democracy and rule of law. Georgia's ruling party, Georgian Dream, has shifted toward authoritarianism, cracking down on civil society, passing "foreign agent" laws mimicking Russian legislation, and rigging elections. For the EU, Georgia represents a cautionary tale: a candidate country that seemed to be progressing but has since backslid into illiberalism. Slovenia's willingness to call out Georgia signals its commitment to EU values—but it also highlights the contradiction between Slovenia's international principled stance and its domestic expediency on Roma issues.

Slovenia's enlargement advocacy also has a geographic logic. As a small country of just over 2 million people, Slovenia benefits from being part of a larger bloc that amplifies its influence. But Slovenia is also acutely aware of the security implications of Balkans instability. The region remains a potential flashpoint for ethnic conflict, organized crime, and Russian interference. By pulling the Western Balkans into the EU orbit, Slovenia hopes to lock in stability, reduce migration pressures, and counter Russian and Chinese influence in a strategically sensitive region. Prime Minister Golob has been explicit about this: in September 2025, he met with EU Council President António Costa and expressed optimism that "conditions will be met for at least two, and possibly even three, countries in the Eastern and South-Eastern regions to join the European Union" during the current Commission mandate.

But there's a risk here too. If the EU admits new members before they're genuinely ready—before rule of law is entrenched, corruption controlled, and democratic institutions robust—it imports instability and dysfunction. Hungary and Poland's democratic backsliding after accession proved that EU membership doesn't automatically lock in liberal democracy. Slovenia's enthusiasm for enlargement could backfire if new members become spoilers, blocking integration initiatives or aligning with illiberal factions. Still, Slovenia's bet is that integration is better than isolation, and that EU leverage is strongest before accession, not after.

**The Big Issue 3: Economic Stability Amid Political Turbulence**

Let's talk about Slovenia's economy, because November 2025 also saw Ljubljana successfully issuing a major international bond—a signal of investor confidence that contrasts sharply with the domestic political chaos. On November 7, Slovenia priced a JPY31.0 billion (roughly €190 million) 3-year fixed-rate senior unsecured bond, marking the first Samurai Bond issued by a Central and Eastern European sovereign in 2025. This successful issuance reflects Slovenia's strong credit rating, fiscal discipline, and investor confidence in its macroeconomic fundamentals. Prime Minister Golob has repeatedly touted the economy's health, stating in January 2025 that Slovenia is "in excellent shape," with a lower-than-expected deficit and declining public debt despite the "challenging environment."

Slovenia's economic resilience is real but contextual. The country weathered the COVID-19 pandemic better than many EU peers, maintaining relatively low unemployment and avoiding severe fiscal crises. Growth is expected to improve in 2025, slightly exceeding the EU average, with private consumption remaining the main driver. But this rosy picture has caveats. Slovenia was hit hard by catastrophic floods in August 2023, which caused billions in damage and required massive reconstruction spending. The budget remained in deficit in 2024, primarily due to post-flood costs, though the deficit improved compared to 2023 thanks to temporary tax increases, including raising the corporate tax rate from 19% to 22% for five years.

Slovenia's economy is also highly dependent on EU trade—over 60% of exports go to EU markets, particularly Germany, Italy, and Austria. This integration brings prosperity but also vulnerability: if the EU economy slows, Slovenia feels the shock immediately. The war in Ukraine and energy price volatility have impacted Slovenian businesses, particularly manufacturing and logistics sectors. But overall, Slovenia has managed these challenges better than neighbors like Hungary or Croatia, thanks in part to prudent fiscal management and a diversified export base.

The contrast between economic stability and political turbulence is striking. Slovenia's GDP per capita is among the highest in Central Europe, living standards are strong, and infrastructure is modern. Yet the country is convulsed by protests, ministerial resignations, and ethnic tensions. This disconnect suggests that economic performance alone doesn't guarantee political stability. Slovenia's crisis is not about bread-and-butter issues—it's about identity, security, and the limits of liberal governance in the face of populist anger. The economy may be doing fine, but the social contract is fraying.

Slovenia's successful bond issuance also reflects its reputation as a "safe" EU member—stable, predictable, and aligned with Brussels. But the November security crisis threatens that reputation. If Slovenia's politics continue to fracture, if ethnic tensions escalate, or if Golob's government collapses, investor confidence could waver. For now, the bond markets remain sanguine, but political risk is real.

**The International Angle**

Slovenia's international position in November 2025 is defined by a paradox: it's a committed EU member state advocating for enlargement and democratic values abroad, while struggling with internal divisions over migration, ethnicity, and security. Slovenia's vocal support for Western Balkans integration positions it as a bridge between "old Europe" and the post-Yugoslav region. In May 2025, Golob met with Spanish Prime Minister Pedro Sánchez to discuss "excellent relations" and shared priorities including the Gaza catastrophe, Ukraine war, European defense, and strategic autonomy. This alignment with progressive EU voices like Spain reflects Slovenia's self-image as a liberal, values-driven actor.

But Slovenia's regional relationships are more complicated. Relations with Croatia remain tense over the Bay of Piran border dispute, a lingering post-Yugoslav territorial conflict that flares up periodically. Slovenia reintroduced police border controls with Croatia and Hungary in October 2023, citing organized crime and migration pressures linked to Middle East tensions. This move frustrated Brussels, which saw it as undermining Schengen principles, but Golob defended it as necessary for security. The border controls remain in place in November 2025, a reminder that even committed EU members will prioritize domestic security concerns over integration ideals when pressed.

Slovenia's relationship with Russia is defined by EU membership: Ljubljana has imposed all EU sanctions on Moscow over the Ukraine war and consistently supports Kyiv. This aligns Slovenia with the transatlantic consensus but distinguishes it sharply from neighbors like Hungary and Serbia, which maintain closer ties to Russia. Slovenia's geographic position—bordering Italy, Austria, Hungary, and Croatia—makes it strategically important within EU security architecture. It's part of NATO, hosts no major military bases, but participates actively in alliance exercises and supports collective defense.

China's role in Slovenia is less prominent than in neighbors like Hungary, but Beijing has invested in infrastructure projects, including the now-controversial Novi Sad-to-Belgrade railway (which passes through Serbia but connects to Slovenian logistics networks). Slovenia has generally taken a cautious approach to Chinese investment, wary of dependence but open to partnerships that align with EU standards.

The US-Slovenia relationship is stable but low-profile. Washington views Slovenia as a reliable EU and NATO ally, but Ljubljana is not a major US priority. The Biden administration's disengagement from Balkans politics has given Slovenia more space to pursue regional diplomacy, but it's also meant less American pressure on rule of law and democratic standards—which arguably allowed the Roma crisis to fester without international scrutiny.

**The Bottom Line**

Slovenia in November 2025 is a country at a crossroads, caught between its aspirations as a liberal European success story and the hard realities of identity politics, ethnic tensions, and populist pressure. The Novo Mesto tragedy and ensuing protests exposed Slovenia's unresolved Roma question—a marginalized community bearing the brunt of economic exclusion, systemic discrimination, and now, punitive emergency legislation. The Šutar Act may restore a temporary sense of order, but it does so at the cost of minority rights and evidence-based policymaking, setting a dangerous precedent for future crises.

At the same time, Slovenia continues to punch above its weight internationally, championing EU enlargement in the Western Balkans and positioning itself as a values-driven actor within the bloc. The economy remains resilient, with successful bond issuances and growth exceeding EU averages. But economic stability alone cannot paper over social fractures. Slovenia's crisis is fundamentally political: it's about whether a small, prosperous European nation can maintain liberal governance and social cohesion when faced with fears—real or imagined—about crime, migration, and cultural change.

Watch three things moving forward. First, whether the Šutar Act reduces crime or simply displaces it, and whether it leads to further scapegoating of Roma communities. Second, whether Golob's government survives politically—losing two ministers in rapid succession signals weakness, and opposition parties will exploit the security crisis in upcoming elections. Third, whether Slovenia's enlargement advocacy gains traction in Brussels, or whether Western Balkans integration stalls amid broader EU dysfunction. Slovenia's future depends on whether it can reconcile its European ideals with its domestic anxieties—and whether fear or principle wins that battle. Right now, fear is gaining ground.`,
  issues: JSON.stringify([
    'The Novo Mesto Tragedy and Slovenia\'s Security Panic',
    'EU Enlargement Champion—Slovenia\'s Western Balkans Evangelism',
    'Economic Stability Amid Political Turbulence'
  ]),
  topStories: JSON.stringify([
    {
      title: 'Slovenia adopts Šutar Act after Roma-linked murder sparks protests',
      source: 'Pravda Balkan',
      link: 'https://balkan.news-pravda.com/en/slovenia/2025/10/30/24379.html',
      pubDate: new Date('2025-10-30').toISOString()
    },
    {
      title: 'Slovenia\'s interior and justice ministers resign over security crisis',
      source: 'Pressenza',
      link: 'https://www.pressenza.com/2025/10/slovenia-when-fear-becomes-politics/',
      pubDate: new Date('2025-10-30').toISOString()
    },
    {
      title: 'Slovenia welcomes 2025 EU Enlargement Package, praises Montenegro',
      source: 'GOV.SI',
      link: 'https://www.gov.si/en/news/2025-11-04-slovenia-welcomes-2025-enlargement-package-and-commits-to-supporting-candidate-countries/',
      pubDate: new Date('2025-11-04').toISOString()
    },
    {
      title: 'Slovenia condemns Georgia\'s democratic backsliding',
      source: 'STA',
      link: 'https://english.sta.si/3484749/slovenia-welcomes-commissions-enlargement-progress-reports',
      pubDate: new Date('2025-11-04').toISOString()
    },
    {
      title: 'Slovenia prices JPY31bn Samurai Bond, first CEE sovereign in 2025',
      source: 'GOV.SI',
      link: 'https://www.gov.si/en/news/',
      pubDate: new Date('2025-11-07').toISOString()
    },
    {
      title: 'Golob: Slovenia\'s economy in excellent shape despite challenges',
      source: 'GOV.SI',
      link: 'https://www.gov.si/en/news/2025-01-15-prime-minister-golob-the-slovenian-government-is-well-aware-of-all-the-challenges/',
      pubDate: new Date('2025-01-15').toISOString()
    },
    {
      title: 'Slovenia-Spain joint declaration on Gaza, Ukraine, EU security',
      source: 'La Moncloa',
      link: 'https://www.lamoncloa.gob.es/lang/en/presidente/news/paginas/2025/20250529-slovenian-prime-minister-visit.aspx',
      pubDate: new Date('2025-05-29').toISOString()
    },
    {
      title: 'Slovenia maintains border controls with Croatia, Hungary',
      source: 'GOV.SI',
      link: 'https://www.gov.si/en/news/',
      pubDate: new Date('2023-10-15').toISOString()
    },
    {
      title: 'Slovenia raises corporate tax to 22% for flood reconstruction',
      source: 'Coface',
      link: 'https://www.coface.com/news-economy-and-insights/business-risk-dashboard/country-risk-files/slovenia',
      pubDate: new Date('2024-06-01').toISOString()
    },
    {
      title: 'August 2023 floods cause billions in damage across Slovenia',
      source: 'Coface',
      link: 'https://www.coface.com/news-economy-and-insights/business-risk-dashboard/country-risk-files/slovenia',
      pubDate: new Date('2023-08-15').toISOString()
    }
  ]),
  storyCount: 28
}

async function addSlovenia() {
  console.log('Adding Slovenia to database...\n')

  try {
    const result = await prisma.locationSummary.upsert({
      where: {
        name_type_category: {
          name: SLOVENIA_SUMMARY.name,
          type: SLOVENIA_SUMMARY.type,
          category: 'all'
        }
      },
      create: {
        name: SLOVENIA_SUMMARY.name,
        type: SLOVENIA_SUMMARY.type,
        country: SLOVENIA_SUMMARY.country,
        lat: SLOVENIA_SUMMARY.lat,
        lng: SLOVENIA_SUMMARY.lng,
        category: 'all',
        summary: SLOVENIA_SUMMARY.summary,
        issues: SLOVENIA_SUMMARY.issues,
        topStories: SLOVENIA_SUMMARY.topStories,
        storyCount: SLOVENIA_SUMMARY.storyCount,
        updatedAt: new Date()
      },
      update: {
        summary: SLOVENIA_SUMMARY.summary,
        issues: SLOVENIA_SUMMARY.issues,
        topStories: SLOVENIA_SUMMARY.topStories,
        storyCount: SLOVENIA_SUMMARY.storyCount,
        updatedAt: new Date()
      }
    })

    console.log('✅ Slovenia added/updated successfully')
    console.log('   ID:', result.id)
    console.log('   Name:', result.name)
    console.log('   Location:', `${result.lat}, ${result.lng}`)
    console.log('   Issues:', JSON.parse(result.issues).length)
    console.log('   Stories:', JSON.parse(result.topStories).length)
    console.log()
  } catch (error) {
    console.error('❌ Error processing Slovenia:', error)
    throw error
  }
}

addSlovenia()
  .catch(console.error)
  .finally(() => prisma.$disconnect())
