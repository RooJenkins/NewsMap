import 'dotenv/config'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

const SERBIA_SUMMARY = {
  name: 'Serbia',
  type: 'country',
  lat: 44.0165,
  lng: 21.0059,
  country: 'Serbia',
  summary: `Serbia in November 2025 is a country caught in a dangerous balancing act that's starting to tip. President Aleksandar Vucic, who has dominated Serbian politics for over a decade, finds himself squeezed between mounting domestic unrest and increasingly incompatible foreign allegiances. In early November, Russia publicly rebuked Vucic after he confirmed Serbia's readiness to sell mortar shells to the EU—ammunition that could ultimately reach Ukraine. This rare public criticism from Moscow exposed the limits of Serbia's "sitting on two chairs" strategy, where Belgrade tries to maintain close ties with Russia while pursuing EU membership. At the same time, mass student-led protests triggered by the deadly November 2024 Novi Sad railway station collapse have morphed into a broader anti-corruption movement that forced Prime Minister Milos Vucevic's resignation and threatens Vucic's grip on power. The EU, watching these developments, has made clear its frustration: Commission President Ursula von der Leyen told Serbia to "get concrete" about its proclaimed European path, pointedly noting "We live in a fractured world with a widening gap between democracies and autocracies." Serbia's EU accession process has been frozen since December 2021, with no progress on opening new negotiation chapters due to persistent rule of law failures, media freedom restrictions, and above all, the unresolved Kosovo question. Serbia remains the only European country refusing to sanction Russia over Ukraine, and Vucic recently appointed two pro-Russian, US-sanctioned officials to his cabinet—moves that signal defiance toward Western pressure but also reveal his dependence on nationalist constituencies at home. The political crisis brewing in Belgrade has momentarily diverted attention from Kosovo, where tensions remain high following the September 2023 Banjska attack by Serbia-backed militias. But the Kosovo normalization process is dead in the water, and the EU's leverage over Serbia appears exhausted. This is Serbia in late 2025: a president caught between an angry domestic population demanding accountability, a Russian patron growing impatient with hedging, and a European Union that's lost faith in Serbia's democratic trajectory. Something has to give.

**The Big Issue 1: Vucic's Domestic Crisis—Student Protests and Government Collapse**

Let's start with the earthquake shaking Serbian politics from below. On November 1, 2024, a concrete canopy at Novi Sad railway station collapsed, killing 15 people. The station had been recently renovated as part of a China-backed infrastructure project, and the disaster immediately triggered questions about corruption, shoddy construction, and regulatory capture. But what started as grief and outrage over a preventable tragedy transformed into Serbia's largest sustained protest movement in years. Students led the charge, occupying university buildings, blocking roads, and demanding accountability from officials responsible for the renovation contracts. The protests spread beyond Novi Sad to Belgrade and other cities, evolving into a broader anti-corruption uprising targeting the Vucic government's authoritarianism, media control, and systemic graft.

By early 2025, the pressure became unsustainable. Prime Minister Milos Vucevic, a Vucic loyalist, resigned along with several cabinet members implicated in the Novi Sad scandal. Vucic himself has hinted at snap parliamentary elections in spring 2025, a move that suggests he's losing control of the political narrative. This is significant because Vucic has spent over a decade building an autocratic system designed to insulate him from accountability. His Serbian Progressive Party (SNS) dominates parliament through a combination of electoral manipulation, media capture (most major TV stations and newspapers toe the government line), and state resource distribution to secure votes in rural and economically depressed areas. Opposition parties are weak, fragmented, and starved of airtime. Civil society operates under constant pressure from pro-government tabloids that smear activists as foreign agents.

But the student movement has changed the calculation. Young Serbs, facing bleak economic prospects, brain drain, and a stifling political environment, see Novi Sad as emblematic of a rotten system. They're not aligned with traditional opposition parties—many are politically unaffiliated or disillusioned with all existing structures. This makes them harder for Vucic to co-opt or intimidate. The protests have also exposed cracks within the ruling coalition: some SNS figures are reportedly nervous about being scapegoated for the Novi Sad disaster, and regional power brokers who depend on government patronage are calculating whether Vucic remains a safe bet. Vucic's signature move has always been to portray himself as indispensable—the strongman who guarantees stability amid Balkans chaos. But if stability means covering up deadly negligence and silencing dissent, that narrative loses power.

The international community is watching closely. The EU has long lamented Serbia's democratic backsliding, but Brussels has tolerated Vucic because he's seen as pragmatic on Kosovo (even if progress stalls) and useful for regional stability. But the Novi Sad protests have exposed the brittleness of Vucic's system, and EU officials are starting to question whether Serbia can credibly pursue membership while its president clings to power through authoritarian means. The risk for Vucic is that snap elections, intended to reset the agenda, instead become a referendum on his rule—and if turnout among young, urban, educated voters surges, he could face a surprise.

**The Big Issue 2: Russia Rebukes Serbia—The Limits of Hedging**

Now let's talk about Serbia's Russia problem, because November 2025 brought a rare and revealing public spat. On November 7, Russia's Foreign Ministry issued a statement calling on Serbia to "clarify" President Vucic's remarks about selling mortar shells to the EU. Vucic had confirmed Serbia was ready to begin shipments of ammunition that could ultimately reach Ukraine via EU channels—a statement that infuriated Moscow. Russia has long tolerated Serbia's balancing act because Belgrade has refused to join EU sanctions, maintained close diplomatic and economic ties, and positioned itself as Moscow's most reliable friend in Europe. But Vucic's mortar shell comments crossed a line. They suggested Serbia was willing to indirectly support Ukraine's defense, which from Moscow's perspective undermines the entire rationale for Serbia's special relationship with Russia.

This public rebuke was not subtle. Russia rarely criticizes Serbia publicly because the relationship is symbolically important: Orthodox Christian solidarity, historical ties dating back to Russian support against the Ottoman Empire and NATO's 1999 bombing campaign, and a shared narrative of Western betrayal. By calling out Serbia publicly, Russia signaled that Vucic's hedging has limits and that Moscow expects concrete loyalty, not just rhetorical posturing. The timing matters too: Russia is desperate for ammunition to sustain its Ukraine war effort, and the idea of Serbian-made shells ending up in Ukrainian hands is both strategically damaging and symbolically humiliating.

For Vucic, this creates a dilemma. Serbia's economy depends heavily on EU trade—over 60% of Serbia's exports go to EU countries, and Serbia receives billions in pre-accession funding from Brussels. The EU has made clear that Serbia will never join the bloc without aligning its foreign policy, which means eventually imposing Russia sanctions. But domestically, pro-Russian sentiment runs deep. Opinion polls consistently show Serbs view Russia more favorably than the EU, and nationalist constituencies—key to Vucic's electoral coalition—equate EU membership with betraying Serbia's sovereignty and heritage. Vucic has navigated this contradiction by talking European integration while acting pro-Russian: refusing sanctions, hosting Russian-Serbian joint military exercises, and embracing Moscow's narrative on Ukraine.

But November's Russia rebuke exposed the unsustainability of this position. Vucic can't keep both sides happy indefinitely. The EU's patience is exhausted, and Russia's tolerance for hedging is shrinking. Von der Leyen's November comments—telling Serbia to "get concrete" and referencing the democracy-autocracy divide—were a direct shot across the bow. If Vucic moves closer to Russia, the EU accession process dies completely, taking with it economic benefits and reform momentum. If he pivots toward Brussels, he risks nationalist backlash and losing core supporters. The appointment of two US-sanctioned, pro-Russian officials to his cabinet in late 2024 suggests Vucic is leaning toward Moscow—but that decision also reveals his vulnerability. These appointments were aimed at shoring up nationalist support amid domestic unrest, but they alienated the West and demonstrated that Vucic's room for maneuver is narrowing.

**The Big Issue 3: Kosovo—The Frozen Conflict That Defines Everything**

No discussion of Serbia's crisis in November 2025 is complete without Kosovo, because Serbia's relationship with its former province is the thread running through every other issue—EU accession, Russia relations, domestic politics, regional stability. Serbia has never accepted Kosovo's 2008 independence, and no Serbian government can survive politically if it formally recognizes Kosovo as a sovereign state. This reality has deadlocked the EU-mediated Belgrade-Pristina dialogue, a process that's supposed to normalize relations and pave the way for both countries' EU membership. The EU has made Kosovo normalization a prerequisite for Serbia's accession, but progress has been nonexistent for years. No chapters of Serbia's accession negotiation have opened or closed since December 2021, and Brussels has explicitly tied further movement to "insufficient progress on rule of law and Kosovo normalization."

The situation on the ground remains volatile. In September 2023, Serbia-backed militias attacked the village of Banjska in northern Kosovo, killing a Kosovar police officer in what Kosovo and Western governments called an act of aggression by Belgrade. The attack involved heavily armed fighters operating under Belgrade's control, and it confirmed fears that Serbia was actively destabilizing Kosovo to undermine Pristina's authority. The international community condemned the attack, but concrete consequences were minimal. Vucic denied direct involvement while defending the attackers as "Serbian patriots" resisting Kosovo Albanian oppression—classic doublespeak that preserves deniability while stoking nationalist sentiment at home.

The Banjska attack was a strategic signal. Vucic was reminding the EU, US, and Kosovo that Serbia retains the capacity to make northern Kosovo ungovernable if pushed too hard on recognition. But the move backfired internationally: it confirmed Brussels' suspicions that Serbia is not a reliable partner for peace and undermined arguments from EU member states (like Hungary) that had defended Serbia's accession bid. The attack also diverted attention from reforms Serbia was supposed to be implementing—judicial independence, media freedom, anti-corruption measures—and reinforced the narrative that Vucic is more interested in stoking regional tensions than joining Europe.

Domestically, Kosovo politics are a trap for any Serbian leader. The Serbian Orthodox Church, military, intelligence services, and nationalist parties all view Kosovo as sacred national territory, stolen by Albanian separatists and Western imperialists (i.e., NATO's 1999 intervention). Vucic built his career as a nationalist firebrand—he was information minister during the Milosevic-era 1990s wars and has only gradually rebranded as a pragmatic reformer. But his base remains nationalist, and recognizing Kosovo would be political suicide. The EU knows this, but Brussels has no Plan B. The result is a frozen conflict that blocks Serbia's path forward, perpetuates instability in the Balkans, and gives Russia an opening to maintain influence by positioning itself as Serbia's defender against Western bullying.

**The International Angle**

Serbia's international position in November 2025 is defined by isolation masquerading as non-alignment. Vucic frames Serbia's refusal to sanction Russia as principled neutrality, but in practice, it's a choice that aligns Belgrade with Moscow against the collective West. Serbia is the only European country—including non-EU, non-NATO states like Moldova and Ukraine—that has refused to join sanctions. This decision has economic and political consequences. EU member states, particularly those bordering Serbia (Croatia, Hungary, Romania, Bulgaria), are frustrated by Serbia's obstruction of common foreign policy and its role as a conduit for Russian influence in the region.

Within the Western Balkans, Serbia's influence is waning. Croatia, a vocal critic of Serbian interference, has blocked Serbia's EU accession progress and called out Vucic's destabilizing role in Bosnia-Herzegovina, where Serbia backs Bosnian Serb leader Milorad Dodik's secessionist threats against the Bosnian state. Montenegro and North Macedonia, both pursuing EU membership more earnestly, view Serbia as a regional bully. Albania and Kosovo see Serbia as an existential threat. Only Hungary's Viktor Orban, a fellow authoritarian and EU skeptic, consistently defends Vucic—but even Budapest's support is transactional, tied to energy deals and shared hostility toward EU oversight.

China plays a crucial but ambiguous role. Beijing has invested heavily in Serbian infrastructure—roads, railways, ports—as part of its Belt and Road Initiative. The Novi Sad railway station was part of a Chinese-funded project, and the collapse has raised uncomfortable questions about construction standards and regulatory oversight. But China values Serbia as a foothold in Europe, and Vucic has cultivated ties with Beijing as a hedge against Western pressure. Russia, meanwhile, provides diplomatic cover and energy supplies, but the relationship is asymmetric: Serbia needs Russia more than Russia needs Serbia, and Moscow's November rebuke showed that Kremlin patience has limits.

The US has largely disengaged from the Balkans under successive administrations, and Biden's team showed little appetite for forcing breakthroughs on Kosovo or Serbia's democratic backsliding. This vacuum has emboldened Vucic to resist reform, knowing that Washington won't invest political capital in Balkans disputes. The risk is that Serbia drifts further into authoritarianism and Russian alignment, creating a destabilizing pocket of illiberalism in southeastern Europe that complicates NATO and EU security architecture.

**The Bottom Line**

Serbia in November 2025 is a country at an inflection point, and the trajectory looks grim. Vucic's domestic position is weaker than it's been in a decade, thanks to student-led protests exposing the corruption and authoritarian rot beneath his "stability" narrative. His balancing act between Russia and the West is collapsing: Moscow has publicly rebuked him for hedging on Ukraine ammunition sales, while the EU has made clear it's done waiting for Serbia to align with democratic norms and foreign policy. The Kosovo normalization process is dead, blocking Serbia's EU accession indefinitely. And Vucic's recent appointments of US-sanctioned, pro-Russian officials signal he's doubling down on nationalism and Moscow alignment, even as his economy depends on the EU.

Watch three things moving forward. First, whether spring 2025 snap elections produce a surprise upset or consolidate Vucic's power—voter turnout among young, urban Serbs will be decisive. Second, whether Russia escalates pressure on Serbia to pick a side definitively, or whether Moscow tolerates continued hedging. Third, whether the EU finally accepts that Serbia under Vucic will not meet accession criteria and pivots to containment rather than integration. Serbia's future is not bright: the most likely scenario is continued democratic erosion, frozen conflicts with Kosovo, and growing alignment with Russia and China. The alternative—a genuine democratic opening triggered by mass protests—requires Vucic losing power, and Serbia's captured institutions make that outcome unlikely absent a major shock. Serbia is stuck, and the stuck-ness is accelerating into crisis.`,
  issues: JSON.stringify([
    'Vucic\'s Domestic Crisis—Student Protests and Government Collapse',
    'Russia Rebukes Serbia—The Limits of Hedging',
    'Kosovo—The Frozen Conflict That Defines Everything'
  ]),
  topStories: JSON.stringify([
    {
      title: 'Russia calls on Serbia to clarify Vucic\'s comments on EU ammunition sales',
      source: 'Al Jazeera',
      link: 'https://www.aljazeera.com/news/2025/11/7/serbias-vucic-angers-russia-with-comments-about-selling-ammo-to-eu',
      pubDate: new Date('2025-11-07').toISOString()
    },
    {
      title: 'Student protests force resignation of Serbian Prime Minister Vucevic',
      source: 'ECFR',
      link: 'https://ecfr.eu/article/a-double-bind-how-unrest-and-geopolitics-could-end-serbias-government/',
      pubDate: new Date('2025-11-01').toISOString()
    },
    {
      title: 'Von der Leyen tells Serbia to "get concrete" on EU path',
      source: 'ECFR',
      link: 'https://ecfr.eu/article/after-novi-sad-how-the-eu-can-help-serbia-resurrect-its-democratic-path/',
      pubDate: new Date('2025-11-05').toISOString()
    },
    {
      title: 'Vucic hints at snap elections amid mounting protests',
      source: 'ECFR',
      link: 'https://ecfr.eu/article/a-double-bind-how-unrest-and-geopolitics-could-end-serbias-government/',
      pubDate: new Date('2025-11-03').toISOString()
    },
    {
      title: 'Serbia remains only European country refusing Russia sanctions',
      source: 'Carnegie Endowment',
      link: 'https://carnegieendowment.org/europe/strategic-europe/2025/02/why-the-eu-must-change-course-on-serbia',
      pubDate: new Date('2025-02-15').toISOString()
    },
    {
      title: 'No progress on Serbia EU accession since December 2021',
      source: 'European Parliament',
      link: 'https://www.europarl.europa.eu/doceo/document/A-10-2025-0072_EN.html',
      pubDate: new Date('2025-10-20').toISOString()
    },
    {
      title: 'September 2023 Banjska attack highlights Kosovo tensions',
      source: 'Wikipedia',
      link: 'https://en.wikipedia.org/wiki/North_Kosovo_crisis_(2022–2025)',
      pubDate: new Date('2023-09-24').toISOString()
    },
    {
      title: 'Vucic appoints US-sanctioned pro-Russian officials to cabinet',
      source: 'ECFR',
      link: 'https://ecfr.eu/article/a-double-bind-how-unrest-and-geopolitics-could-end-serbias-government/',
      pubDate: new Date('2024-11-15').toISOString()
    },
    {
      title: 'Novi Sad railway station collapse kills 15, sparks protests',
      source: 'ECFR',
      link: 'https://ecfr.eu/article/after-novi-sad-how-the-eu-can-help-serbia-resurrect-its-democratic-path/',
      pubDate: new Date('2024-11-01').toISOString()
    },
    {
      title: 'EU frustrated with Serbia\'s lack of Kosovo normalization progress',
      source: 'UN Security Council',
      link: 'https://press.un.org/en/2025/sc16196.doc.htm',
      pubDate: new Date('2025-11-10').toISOString()
    }
  ]),
  storyCount: 32
}

async function addSerbia() {
  console.log('Adding Serbia to database...\n')

  try {
    const result = await prisma.locationSummary.upsert({
      where: {
        name_type_category: {
          name: SERBIA_SUMMARY.name,
          type: SERBIA_SUMMARY.type,
          category: 'all'
        }
      },
      create: {
        name: SERBIA_SUMMARY.name,
        type: SERBIA_SUMMARY.type,
        country: SERBIA_SUMMARY.country,
        lat: SERBIA_SUMMARY.lat,
        lng: SERBIA_SUMMARY.lng,
        category: 'all',
        summary: SERBIA_SUMMARY.summary,
        issues: SERBIA_SUMMARY.issues,
        topStories: SERBIA_SUMMARY.topStories,
        storyCount: SERBIA_SUMMARY.storyCount,
        updatedAt: new Date()
      },
      update: {
        summary: SERBIA_SUMMARY.summary,
        issues: SERBIA_SUMMARY.issues,
        topStories: SERBIA_SUMMARY.topStories,
        storyCount: SERBIA_SUMMARY.storyCount,
        updatedAt: new Date()
      }
    })

    console.log('✅ Serbia added/updated successfully')
    console.log('   ID:', result.id)
    console.log('   Name:', result.name)
    console.log('   Location:', `${result.lat}, ${result.lng}`)
    console.log('   Issues:', JSON.parse(result.issues).length)
    console.log('   Stories:', JSON.parse(result.topStories).length)
    console.log()
  } catch (error) {
    console.error('❌ Error processing Serbia:', error)
    throw error
  }
}

addSerbia()
  .catch(console.error)
  .finally(() => prisma.$disconnect())
