import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

const AMERICAS_REMAINING = [
  { name: 'Cuba', lat: 21.5218, lng: -77.7812, summary: `# Cuba - Education\n\nCuba's education system is paradoxical: exceptionally high literacy and universal access, achieved under authoritarianism with minimal resources. The U.S. embargo has strangled funding, yet Cuban schools produce doctors, scientists, and teachers who serve globally. But in 2025, economic crisis and emigration threaten to collapse the system.\n\n## The Big Issue 1: Brain Drain and Teacher Exodus\n\nOver 300,000 Cubans have emigrated since 2021, including thousands of teachers. Remaining educators earn $20-30/monthâ€”poverty wages. Classrooms are understaffed, and morale is collapsing.\n\n## The Big Issue 2: Resource Scarcity and Infrastructure Decay\n\nSchools lack textbooks, technology, and basic supplies. Buildings are crumbling. The embargo prevents importing educational materials. Students learn in conditions that would shock observers.\n\n## The Big Issue 3: Ideological Control vs. Critical Thinking\n\nCuban education emphasizes revolutionary ideology alongside academics. While literacy is universal, critical analysis of the system is forbidden. This limits intellectual freedom and democratic development.\n\n## The International Angle\n\nCuba's medical and teaching internationalismâ€”sending educators and doctors to poor countriesâ€”is remarkable. But it's also exploitation, with professionals earning minimal wages while generating hard currency for the state.\n\n## The Bottom Line\n\nCuba proves universal education is possible even in poverty. But without economic reform, emigration possibilities, and intellectual freedom, the system will hemorrhage talent. Ending the embargo would help, but internal reforms are also essential.`, issues: ['Brain Drain and Teacher Exodus', 'Resource Scarcity and Infrastructure Decay', 'Ideological Control vs. Critical Thinking'] },

  { name: 'Dominican Republic', lat: 18.7357, lng: -70.1627, summary: `# Dominican Republic - Education\n\nThe Dominican Republic spends 4% of GDP on educationâ€”among the lowest in Latin America. The predictable result: overcrowded classrooms, underpaid teachers, and outcomes that lag regional peers. The government talks reform but delivers austerity.\n\n## The Big Issue 1: Chronic Underfunding\n\nThe constitution mandates 4% minimum for education, but enforcement is weak and the amount is insufficient. Teachers earn poverty wages, and schools lack basic resources.\n\n## The Big Issue 2: Haitian Exclusion and Discrimination\n\nChildren of Haitian migrants face systematic exclusionâ€”denied birth certificates and school enrollment. This is state-sanctioned educational apartheid.\n\n## The Big Issue 3: Private School Divide\n\nWealthy families attend private schools; poor families get underfunded public schools. The gap is widening, entrenching inequality across generations.\n\n## The International Angle\n\nThe DR follows the failed neoliberal playbook: minimal public investment, privatization, and tolerance of inequality. Regional neighbors with stronger public systems outperform dramatically.\n\n## The Bottom Line\n\nThe Dominican Republic needs to double education spending, enforce universal enrollment including for Haitian children, and pay teachers professionally. Anything less is abandoning the future.`, issues: ['Chronic Underfunding', 'Haitian Exclusion and Discrimination', 'Private School Divide'] },

  { name: 'Ecuador', lat: -1.8312, lng: -78.1834, summary: `# Ecuador - Education\n\nEcuador's education system reflects the country's political volatility. Rafael Correa's government (2007-2017) invested heavily in schools, universities, and teacher salaries. Subsequent neoliberal governments have reversed much of that progress, leading to strikes, protests, and declining outcomes.\n\n## The Big Issue 1: Reversal of Correa-Era Gains\n\nFree higher education is under attack. The current government proposes tuition fees and cuts to university budgets. Students are mobilizing in response.\n\n## The Big Issue 2: Indigenous Education Rights\n\nIndigenous communities demand bilingual education and culturally relevant curricula. Implementation is minimal, and funding is inadequate.\n\n## The Big Issue 3: Teacher Strikes and Salary Cuts\n\nTeachers have faced salary cuts and increased workloads. Strikes are frequent. The government portrays teachers as obstacles rather than partners.\n\n## The International Angle\n\nEcuador's swings between investment and austerity mirror regional debates. The evidence favors investment, but IMF pressure pushes austerity.\n\n## The Bottom Line\n\nEcuador must resist external pressure to privatize education. The Correa-era investments showed what's possible when government prioritizes people over profits.`, issues: ['Reversal of Correa-Era Gains', 'Indigenous Education Rights', 'Teacher Strikes and Salary Cuts'] },

  { name: 'El Salvador', lat: 13.7942, lng: -88.8965, summary: `# El Salvador - Education\n\nPresident Nayib Bukele's authoritarian governance extends to education: militarized schools, surveillance, and propaganda replacing pedagogy. Meanwhile, gang violence and poverty make learning nearly impossible for many students.\n\n## The Big Issue 1: Militarization of Schools\n\nBukele has deployed police and military to schools under the guise of security. The result: intimidation, surveillance, and the criminalization of youth.\n\n## The Big Issue 2: Gang Violence and Displacement\n\nDespite Bukele's crackdown, violence persists. Students miss school due to gang threats, and families flee, disrupting education for thousands.\n\n## The Big Issue 3: Propaganda Over Education\n\nCurricula increasingly promote Bukele's personality cult. Critical thinking and civic education are being replaced with authoritarian messaging.\n\n## The International Angle\n\nEl Salvador's turn toward authoritarianism mirrors global trends. Education becomes a tool of control rather than liberation.\n\n## The Bottom Line\n\nSalvadoran children need safe, democratic schools that foster critical thinkingâ€”not militarized propaganda centers. The current path leads to indoctrination, not education.`, issues: ['Militarization of Schools', 'Gang Violence and Displacement', 'Propaganda Over Education'] },

  { name: 'Guatemala', lat: 15.7835, lng: -90.2308, summary: `# Guatemala - Education\n\nGuatemala has one of the lowest education budgets in the hemisphereâ€”less than 3% of GDP. For Indigenous Maya children, who comprise half the population, the situation is even worse: underfunded bilingual programs, discrimination, and systemic exclusion.\n\n## The Big Issue 1: Indigenous Education Neglect\n\nMaya-language education is underfunded and understaffed. Most Indigenous children are taught in Spanish, which they may not speak at home, ensuring academic failure.\n\n## The Big Issue 2: Rural School Scarcity\n\nRural areas lack schools entirely. Children walk hours to reach one-room schoolhouses with minimal resources. Dropout rates exceed 60%.\n\n## The Big Issue 3: Elite Resistance to Investment\n\nGuatemala's oligarchy refuses tax increases to fund education. They send their children to private schools and see no reason to invest in public systems.\n\n## The International Angle\n\nGuatemala's education crisis drives migration to the U.S. Investing in Guatemalan schools would reduce migration more than any border wall.\n\n## The Bottom Line\n\nGuatemala needs a doubling of education spending, comprehensive Indigenous-language instruction, and political will to challenge elite control. Children are paying the price for oligarchic greed.`, issues: ['Indigenous Education Neglect', 'Rural School Scarcity', 'Elite Resistance to Investment'] },

  { name: 'Haiti', lat: 18.9712, lng: -72.2852, summary: `# Haiti - Education\n\nHaiti's education system is a catastropheâ€”and I don't use that word lightly. Over 80% of schools are private, mostly unregulated and profit-driven. Public schools are few, underfunded, and overwhelmed. Political instability, gang violence, and natural disasters have made education nearly impossible.\n\n## The Big Issue 1: Privatization by Default\n\nWith minimal public schools, Haitian families pay for-profit institutions that provide poor education at prices they can't afford. This isn't choiceâ€”it's abandonment.\n\n## The Big Issue 2: Gang Violence and School Closures\n\nGangs control much of Port-au-Prince. Schools close for months due to violence. Children learn in terror or not at all.\n\n## The Big Issue 3: International Neglect\n\nDespite billions in aid post-earthquake, education infrastructure remains devastated. Aid goes to NGOs, not the Haitian public system.\n\n## The International Angle\n\nHaiti's crisis reflects international failuresâ€”colonialism's legacy, aid mismanagement, and contempt for Black nations. Education would be the foundation of recovery, but it's ignored.\n\n## The Bottom Line\n\nHaiti needs a massive, internationally funded public school construction program, teacher training, and security. Privatization has failed. Public education is the only path forward.`, issues: ['Privatization by Default', 'Gang Violence and School Closures', 'International Neglect'] },

  { name: 'Honduras', lat: 15.2000, lng: -86.2419, summary: `# Honduras - Education\n\nHonduras ranks near the bottom regionally in education outcomes. Chronic underfunding, corruption, and violence create conditions where learning is a luxury most children can't access.\n\n## The Big Issue 1: Corruption Devouring Budgets\n\nEducation funds are routinely stolen. Ghost teachers collect salaries. Schools that exist on paper are nonexistent in reality. Children suffer.\n\n## The Big Issue 2: Violence and Forced Migration\n\nGang and state violence force families to flee. Thousands of children migrate north, their education interrupted or ended permanently.\n\n## The Big Issue 3: Teacher Persecution\n\nTeachers who organize for better conditions face threats and violence. Union leaders have been murdered. Fear silences demands for justice.\n\n## The International Angle\n\nU.S. support for Honduran security forces perpetuates the violence that makes education impossible. Aid should support schools, not militarization.\n\n## The Bottom Line\n\nHonduran children deserve safety, funded schools, and teachers who can advocate without fear. The current system is a human rights catastrophe.`, issues: ['Corruption Devouring Budgets', 'Violence and Forced Migration', 'Teacher Persecution'] },

  { name: 'Nicaragua', lat: 12.8654, lng: -85.2072, summary: `# Nicaragua - Education\n\nDaniel Ortega's authoritarian regime has weaponized education, closing universities, arresting professors, and imposing ideological conformity. What was once a promising public system is now a tool of repression.\n\n## The Big Issue 1: University Closures and Academic Repression\n\nOrtega has shuttered over 50 universities and NGOs, labeling them threats. Professors and students face arrest for dissent.\n\n## The Big Issue 2: Ideological Indoctrination\n\nCurricula promote Sandinista ideology and Ortega's personality cult. Critical thinking is punished. Education becomes propaganda.\n\n## The Big Issue 3: Exile of Educators\n\nThousands of teachers and academics have fled Nicaragua. Those remaining self-censor to avoid persecution.\n\n## The International Angle\n\nNicaragua's authoritarianism mirrors Venezuela and Cubaâ€”left-wing rhetoric masking brutal repression. Education suffers when regimes fear thinking citizens.\n\n## The Bottom Line\n\nNicaraguan education won't recover until democratic governance returns. Students and teachers deserve freedom, not fear.`, issues: ['University Closures and Academic Repression', 'Ideological Indoctrination', 'Exile of Educators'] },

  { name: 'Panama', lat: 8.5380, lng: -80.7821, summary: `# Panama - Education\n\nPanama's economy is growing, but education investment lags. The result: a two-tier system where wealthy families access quality private schools and poor families make do with underfunded public institutions.\n\n## The Big Issue 1: Inequality Despite Growth\n\nPanama's GDP per capita is regional leader, yet education spending is mediocre. The wealth doesn't reach classrooms.\n\n## The Big Issue 2: Indigenous and Rural Exclusion\n\nIndigenous Guna, EmberÃ¡, and NgÃ¤be children face systematic exclusion. Rural schools lack basics. Dropout rates are catastrophic.\n\n## The Big Issue 3: Teacher Strikes and Discontent\n\nTeachers regularly strike for pay and conditions. The government responds with minimal concessions, prolonging conflict.\n\n## The International Angle\n\nPanama could be the model for education investment in growing economies. Instead, it follows the inequality playbook.\n\n## The Bottom Line\n\nPanama has resources. It needs political will to invest equitably in all children, not just the elite.`, issues: ['Inequality Despite Growth', 'Indigenous and Rural Exclusion', 'Teacher Strikes and Discontent'] },

  { name: 'Paraguay', lat: -23.4425, lng: -58.4438, summary: `# Paraguay - Education\n\nParaguay's education system is marked by profound urban-rural divides, chronic underfunding, and weak outcomes. Bilingual education in GuaranÃ­ and Spanish exists in law but not in practice.\n\n## The Big Issue 1: GuaranÃ­ Language Education Failure\n\nMost Paraguayans speak GuaranÃ­, but schools teach primarily in Spanish. Bilingual programs are underfunded and poorly implemented.\n\n## The Big Issue 2: Rural Abandonment\n\nRural schools are one-room buildings with one teacher for six grades. Resources are nonexistent. Outcomes are predictably poor.\n\n## The Big Issue 3: Corruption and Mismanagement\n\nEducation budgets are looted. Schools exist on paper but not in reality. Teachers aren't paid for months.\n\n## The International Angle\n\nParaguay's challenges mirror those across poor rural Latin Americaâ€”neglect, corruption, and elite indifference.\n\n## The Bottom Line\n\nParaguayan children need genuine bilingual education, funded rural schools, and accountable governance. Without it, inequality will persist.`, issues: ['GuaranÃ­ Language Education Failure', 'Rural Abandonment', 'Corruption and Mismanagement'] },

  { name: 'Peru', lat: -9.1900, lng: -75.0152, summary: `# Peru - Education\n\nPeru's education system reflects the country's deep inequalities. Lima's elite attend well-resourced private schools while rural Indigenous children learn in one-room schoolhousesâ€”if they attend school at all.\n\n## The Big Issue 1: Indigenous Education Neglect\n\nQuechua- and Aymara-speaking children are taught in Spanish. Bilingual programs are underfunded. Academic failure is systemic, not individual.\n\n## The Big Issue 2: Rural-Urban Inequality\n\nLima schools have technology and resources. Rural Andean and Amazonian schools lack electricity, water, and teachers.\n\n## The Big Issue 3: Teacher Persecution Under Boluarte\n\nPresident Dina Boluarte's government has violently repressed protests, including those by teachers. Educators demanding better pay face state violence.\n\n## The International Angle\n\nPeru's inequalities mirror those across the Andes. Without investment in rural Indigenous education, social mobility remains a myth.\n\n## The Bottom Line\n\nPeru needs comprehensive Indigenous-language education, massive rural school investment, and respect for teachers' rights. Repression and neglect guarantee continued inequality.`, issues: ['Indigenous Education Neglect', 'Rural-Urban Inequality', 'Teacher Persecution Under Boluarte'] },

  { name: 'Uruguay', lat: -32.5228, lng: -55.7658, summary: `# Uruguay - Education\n\nUruguay once led Latin America in educationâ€”high literacy, strong public schools, and equitable access. But decades of underinvestment and privatization creep are eroding that legacy.\n\n## The Big Issue 1: Declining PISA Scores\n\nUruguay's international assessment scores have fallen. The cause: stagnant funding and growing inequality, not teacher quality.\n\n## The Big Issue 2: Privatization Expansion\n\nPrivate school enrollment is growing among the wealthy. Public schools increasingly serve only the poor, reducing political support for investment.\n\n## The Big Issue 3: Teacher Salary Stagnation\n\nTeacher pay hasn't kept pace with inflation. Strikes are frequent, but governments offer minimal increases.\n\n## The International Angle\n\nUruguay's decline shows what happens when progressive countries adopt neoliberal education policies. The Nordic model works better.\n\n## The Bottom Line\n\nUruguay can reclaim its education leadership by rejecting privatization, increasing teacher pay, and reinvesting in public schools. The foundation is still strong.`, issues: ['Declining PISA Scores', 'Privatization Expansion', 'Teacher Salary Stagnation'] },

  { name: 'Venezuela', lat: 6.4238, lng: -66.5897, summary: `# Venezuela - Education\n\nVenezuela's education system has collapsed under economic crisis, political repression, and mass emigration. Teachers earn $5-10/month. Schools lack electricity, water, and supplies. Over 7 million Venezuelans have fled, including thousands of educators.\n\n## The Big Issue 1: Economic Collapse and Teacher Poverty\n\nHyperinflation has destroyed teacher salaries. Educators can't afford food, let alone support families. The profession has been abandoned.\n\n## The Big Issue 2: Mass Emigration of Educators\n\nThousands of teachers have fled to Colombia, Peru, and beyond. Those remaining are demoralized and overwhelmed.\n\n## The Big Issue 3: Ideological Control and Repression\n\nThe Maduro regime uses schools for propaganda. Teachers who dissent face dismissal or worse. Education becomes indoctrination.\n\n## The International Angle\n\nVenezuela's crisis is a warning: economic mismanagement and authoritarianism destroy education systems. The human cost is immeasurable.\n\n## The Bottom Line\n\nVenezuela's education recovery requires political change, economic stabilization, and massive investment. Without it, a generation is lost.`, issues: ['Economic Collapse and Teacher Poverty', 'Mass Emigration of Educators', 'Ideological Control and Repression'] }
]

async function saveBatch() {
  console.log('ðŸ“š Saving Americas Education Batch (Remaining 13 countries)\\n')

  let saved = 0, skipped = 0, errors = 0

  for (const country of AMERICAS_REMAINING) {
    try {
      const existing = await prisma.locationSummary.findUnique({
        where: { name_type_category: { name: country.name, type: 'country', category: 'education' } }
      })

      if (existing) {
        console.log(`  â­ï¸  ${country.name}`)
        skipped++
        continue
      }

      await prisma.locationSummary.create({
        data: {
          name: country.name,
          type: 'country',
          country: country.name,
          lat: country.lat,
          lng: country.lng,
          category: 'education',
          summary: country.summary,
          issues: JSON.stringify(country.issues),
          topStories: JSON.stringify([]),
          storyCount: 0,
          updatedAt: new Date()
        }
      })

      saved++
      console.log(`  âœ… ${country.name}`)
    } catch (error) {
      console.error(`  âŒ ${country.name}:`, error)
      errors++
    }
  }

  const total = await prisma.locationSummary.count({ where: { category: 'education', type: 'country' } })
  console.log(`\\nðŸ“Š Americas Complete: ${saved} saved, ${skipped} skipped, ${errors} errors`)
  console.log(`\\nðŸ“ˆ TOTAL PROGRESS: ${total}/114 (${Math.round(total/114*100)}%)`)

  if (total >= 25) {
    console.log(`\\nðŸŽ‰ *** MILESTONE: 25+ COUNTRIES COMPLETED! ***`)
  }
}

saveBatch().catch(console.error).finally(() => prisma.$disconnect())
