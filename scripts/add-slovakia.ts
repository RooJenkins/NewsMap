import 'dotenv/config'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

const SLOVAKIA_SUMMARY = {
  name: 'Slovakia',
  type: 'country',
  lat: 48.6690,
  lng: 19.6990,
  country: 'Slovakia',
  summary: `Slovakia's Prime Minister Robert Fico stood in front of cameras in early November 2025 and delivered a message that confirmed what everyone already knew: Slovakia will not support using frozen Russian assets to fund Ukraine's military. Not one euro. Not under any circumstances. This wasn't a surprise—Fico has been Vladimir Putin's most reliable EU ally since returning to power in October 2023—but the timing matters. As the EU scrambles to assemble €140 billion in financial backing for Ukraine using Russian state assets as collateral, Slovakia's veto power threatens the entire scheme. The declaration came during the same week that Fico refused to accept the resignation of his transport minister following a train crash near Bratislava that injured dozens and exposed Slovakia's crumbling infrastructure. Opposition leader Michal Šimečka accused the government of presiding over "14 years of infrastructure crisis under Smer rule," but Fico dismissed the criticism as political opportunism. And just days later, on November 17, Slovaks woke up to discover that the anniversary of the Velvet Revolution—the peaceful overthrow of communism in 1989—was no longer a public holiday. Fico had quietly abolished it as part of his austerity budget, calling it unnecessary expense. Critics saw something darker: the erasure of democratic memory in a country sliding toward autocracy. This is Slovakia in November 2025: a small Central European nation of 5.4 million people that's become a case study in democratic backsliding, a cautionary tale about what happens when populist leaders capture state institutions, silence civil society, and align with authoritarian powers. Fico's government isn't just skeptical of Ukraine—it's actively obstructionist, blocking EU consensus, cozying up to Moscow, and dismantling the checks and balances that keep democracies functional. And the consequences are piling up fast.

**The Big Issue 1: Slovakia Blocks EU Use of Russian Assets for Ukraine**

Let's start with the headline: Slovakia will not participate in any EU scheme to use frozen Russian sovereign assets to support Ukraine's war effort. On November 9, 2025, Prime Minister Robert Fico made this explicit: "Slovakia will not participate in any legal or financial schemes to seize frozen assets if these funds are spent on military expenditures in Ukraine." This isn't rhetoric—it's policy. And it has real consequences. The European Union has frozen approximately €200 billion in Russian Central Bank assets since February 2022, most of it held in Belgium's Euroclear clearing house. Brussels has been trying to figure out how to legally mobilize those assets to support Ukraine's defense without outright confiscation, which would trigger massive legal battles and potentially destabilize global financial markets. The current proposal: use the frozen assets as collateral to raise €140 billion in loans, with the interest generated from those assets covering Ukraine's debt servicing costs. It's creative financial engineering designed to get around the legal and political obstacles to outright seizure. But it requires unanimous EU support. And Slovakia says no.

Why does this matter? Because Slovakia's veto could collapse the entire package. The EU operates on consensus for major financial decisions, and Fico knows this gives him leverage. He's not just defending Russia's property rights out of principle—he's positioning Slovakia as Moscow's voice inside the European Union, a blocking mechanism that prevents the West from fully weaponizing its economic sanctions. And Fico has been consistent: Slovakia has opposed every major escalation of support for Ukraine since he returned to power in October 2023. His government halted military aid shipments, refused to allow Ukrainian grain transit without strict quotas, and blocked Slovakia's airspace for NATO weapons deliveries. Fico's justification is always the same: the war in Ukraine is being prolonged by Western arms shipments, and Slovakia's national interest lies in peace negotiations, not escalation. But the opposition sees something else: a government that's prioritizing its relationship with Moscow over its obligations to NATO and the EU.

Here's the geopolitical context: Slovakia borders Ukraine. It's a NATO member. It joined the EU in 2004. It should, by all logic, be deeply invested in Ukraine's survival. Instead, Fico's government has become one of the most pro-Russian regimes in Europe. After Viktor Orbán's Hungary, Slovakia is the second most obstructionist EU member on Ukraine policy. And unlike Hungary, which has legitimate economic dependencies on Russian energy, Slovakia's obstruction is primarily ideological. Fico campaigned in 2023 on a peace platform, arguing that Slovakia had given too much to Ukraine and received nothing in return. He promised to end military aid, normalize relations with Russia, and resist what he calls the "Brussels diktat" on foreign policy. And he's delivering.

The opposition is furious. Michal Šimečka, leader of the Progressive Slovakia party, has accused Fico of betraying Slovakia's democratic values and turning the country into a pariah within NATO and the EU. In January 2025, opposition parties called for a no-confidence vote against Fico's government, arguing that his pro-Russia policies were isolating Slovakia diplomatically and economically. The motion failed—Fico's coalition holds a narrow majority—but the political battle is far from over. The November 2025 announcement on Russian assets was a reminder that Slovakia's foreign policy has fundamentally shifted, and the consequences will shape the country's international standing for years to come.

**The Big Issue 2: Infrastructure Crisis and State Dysfunction**

While Fico was busy blocking EU sanctions on Russia, his government was dealing with a very different crisis: Slovakia's infrastructure is collapsing. On November 7, 2025, two trains collided near Bratislava, leaving dozens injured and prompting a national debate about railway safety. The crash was the latest in a series of infrastructure failures—derailments, delays, signal malfunctions—that have plagued Slovakia's state-owned railway company for years. Transport Minister Jozef Ráž immediately offered his resignation, citing the systemic failures under his watch. But Fico refused to accept it. In a press conference, the Prime Minister accused opposition critics of exploiting the tragedy for political gain and insisted that Ráž would remain in his post to oversee reforms. Opposition leader Michal Šimečka was unimpressed: "After 14 years of Smer governments, Slovakia's infrastructure is in crisis. This is not an accident—it's the result of corruption, mismanagement, and neglect."

Šimečka isn't wrong. Slovakia's infrastructure has been underfunded for decades, and the problem predates Fico's current government. But his refusal to accept accountability—or even his minister's resignation—reflects a broader pattern of governance: deny responsibility, attack critics, and double down. This is classic populist crisis management. And it's not limited to railways. Slovakia's healthcare system is understaffed and underfunded, with doctors and nurses emigrating to Austria and the Czech Republic for better pay. The education system is in chaos, with teachers striking over wages. The judicial system is politicized, with Fico's government pushing legislative reforms that critics say will undermine judicial independence. And Slovakia's economy, while growing modestly, is heavily dependent on automotive manufacturing—primarily German-owned plants assembling Volkswagen, BMW, and Peugeot vehicles—which leaves it vulnerable to European recessions and the shift to electric vehicles.

The train crash became a flashpoint because it symbolized the state's dysfunction. Slovakia's infrastructure literally cannot keep the trains running on time, yet the government's priority is blocking EU sanctions on Russia and abolishing public holidays commemorating the fall of communism. The opposition argues this is deliberate: Fico is consolidating power by weakening state institutions, silencing critics, and using anti-Western rhetoric to distract from domestic failures. And there's evidence to support this. In 2024, Fico's government passed legislation tightening controls on non-governmental organizations, requiring NGOs receiving foreign funding to register with the government and disclose donors. Critics compare it to Russia's "foreign agent" law, which has been used to crush civil society. The Velvet Revolution anniversary—November 17—was a national holiday for 24 years, a symbolic reminder of Slovakia's democratic transition. Fico abolished it in 2025 as part of his austerity budget, calling it an "unnecessary expense." But the message was clear: democratic memory is inconvenient for a government that governs like the regimes that fell in 1989.

**The Big Issue 3: Democratic Backsliding and Civil Society Under Siege**

Slovakia is not Hungary—not yet. But it's moving in that direction. Since returning to power in October 2023, Robert Fico's government has systematically weakened democratic institutions, curtailed media freedom, and targeted civil society. The NGO law passed in 2024 requires organizations receiving more than €5,000 annually in foreign funding to register as "organizations supported from abroad" and publicly disclose their donors. The government claims this is about transparency. Critics say it's about intimidation. NGOs working on anti-corruption, judicial independence, and human rights—many of them funded by Western donors—are now labeled as foreign agents, a term that carries heavy stigma in post-communist Europe. The law mirrors legislation in Russia and Hungary, and its intent is the same: to delegitimize independent watchdogs and portray them as tools of foreign interference.

The government has also moved aggressively against media critics. Slovakia has a long history of media freedom struggles—investigative journalist Ján Kuciak was murdered in 2018 while reporting on government corruption, a crime that eventually brought down Fico's previous government—but the current administration is testing new tactics. In 2024, Fico's coalition proposed amendments to the penal code that would criminalize "defamation of the state" and increase penalties for journalists who publish classified information. The proposals stalled after international outcry, but the intent was clear: silence critical journalism. Meanwhile, state-owned media outlets have been brought under tighter government control, with editorial boards replaced by Fico loyalists.

The abolition of the Velvet Revolution holiday is part of this broader trend. November 17 commemorates the 1989 student protests that triggered Czechoslovakia's peaceful transition from communism to democracy. It's a day of national reflection, celebrated with speeches, concerts, and remembrance events across the country. Fico scrapped it in November 2025, citing budget pressures. But the timing is symbolic: 2025 marks 36 years since the Velvet Revolution, and Slovakia's democratic institutions are weaker than they've been in decades. Opposition politicians organized protests on November 17, 2025, drawing thousands to Bratislava's streets. But without the official holiday, turnout was lower than previous years. The government's calculation is cynical but effective: erase the symbols of democratic resistance, and you weaken the culture of dissent.

Here's the international dimension: Slovakia's democratic backsliding is not happening in isolation. It's part of a broader pattern across Central and Eastern Europe, where populist governments are using EU membership as cover to dismantle liberal democracy from within. Hungary blazed the trail under Viktor Orbán. Poland followed under Law and Justice (until the 2023 election flipped the government). Now Slovakia is the latest example. And unlike Hungary, which has faced EU sanctions and funding cuts, Slovakia has so far avoided serious consequences. Brussels has issued warnings, but no penalties. The European Parliament held debates in early 2025 on Slovakia's rule-of-law record, but no action followed. The EU's problem: it lacks enforcement mechanisms to punish member states that violate democratic norms. And Fico knows this. He's betting that he can consolidate power domestically, align with Russia internationally, and face minimal consequences from Brussels. So far, he's right.

**The International Angle**

Slovakia's foreign policy under Robert Fico is a study in contradictions. The country is a NATO member that refuses to support Ukraine militarily. It's an EU member that blocks sanctions on Russia. It's a Western ally that takes cues from Moscow. And it's doing all of this while sitting on Ukraine's western border, inside the Schengen Area, and dependent on EU structural funds for economic development. The geopolitical consequences are significant. Slovakia's obstruction on Russian asset seizures is part of a broader pattern: Fico's government has consistently used its EU and NATO membership to shield Russian interests. In February 2025, Slovakia abstained from an EU vote on extending sanctions on Russian oil exports. In March, Fico traveled to Moscow for meetings with Russian officials, becoming one of the first EU leaders to visit since the war began. And throughout 2025, Slovakia has blocked NATO efforts to increase weapons supplies to Ukraine via Slovak territory.

This has turned Slovakia into a diplomatic headache for Washington and Brussels. The U.S. has privately pressured Fico to align with NATO consensus on Ukraine, but to no effect. Germany and Poland, Slovakia's largest trading partners, have warned that continued obstruction could damage economic ties. And the EU is increasingly frustrated that a small member state of 5.4 million people can veto major foreign policy initiatives. But here's the reality: Fico doesn't care. His domestic political base supports a pro-Russia, anti-Western stance. His coalition partner, the Slovak National Party, is even more radical, openly calling for Slovakia to leave NATO and recognize Russian sovereignty over Crimea. And Fico's calculation is simple: Brussels won't kick Slovakia out of the EU, and NATO won't expel a member state. So Slovakia can obstruct, irritate, and align with Moscow—and face no serious consequences.

The opposition sees this as a betrayal. Michal Šimečka has positioned himself as the anti-Fico, advocating for full support for Ukraine, stronger ties with NATO, and recommitment to EU democratic values. But the opposition is fragmented, and Fico's coalition holds a slim majority in parliament. The next election isn't until 2027, which gives Fico nearly two more years to consolidate power, weaken institutions, and reshape Slovakia's foreign policy. And the trends are not encouraging. Slovakia's public opinion on Russia has shifted: polls in 2025 show that roughly 40% of Slovaks view Russia favorably, up from 25% in 2022. This is partly due to war fatigue, partly due to government propaganda, and partly due to deep historical ties between Slovakia and Russia. Fico is exploiting this, positioning himself as a pragmatist who prioritizes Slovak interests over Brussels' demands. It's working politically, even if it's isolating Slovakia internationally.

**The Bottom Line**

Slovakia in November 2025 is a country at a crossroads, and the path it's taking leads away from liberal democracy and toward something darker. Robert Fico's government is not just pro-Russia—it's actively obstructing EU and NATO efforts to support Ukraine, using its veto power to shield Russian assets from seizure and blocking weapons transit through Slovak territory. Domestically, Fico is dismantling democratic checks and balances: tightening controls on NGOs, intimidating independent media, refusing ministerial resignations after infrastructure disasters, and abolishing the Velvet Revolution holiday to erase democratic memory. The opposition is fighting back, but it's fragmented and outnumbered. And the international community is watching with alarm, but doing little to stop it. Slovakia is not Hungary—yet. But the trajectory is clear. Watch three things: First, whether Slovakia's veto on Russian asset seizures derails EU support for Ukraine—if it does, Fico will have proven that a small country can punch above its weight in protecting Moscow's interests. Second, whether the November 17 protests grow into a sustained resistance movement, or whether Fico successfully crushes dissent through legal and institutional pressure. Third, whether the EU imposes rule-of-law sanctions on Slovakia, cutting structural funds and isolating the government diplomatically. Fico's bet is that Brussels won't act. If he's right, Slovakia's democratic backsliding will accelerate, and the country will become Europe's next Hungary—a member state in geography only, autocratic in practice, and aligned with Russia in spirit.`,
  issues: JSON.stringify([
    'Slovakia Blocks EU Use of Russian Assets for Ukraine',
    'Infrastructure Crisis and State Dysfunction',
    'Democratic Backsliding and Civil Society Under Siege'
  ]),
  topStories: JSON.stringify([
    {
      title: 'Slovakia opposes use of frozen Russian assets to support Ukraine',
      source: 'Pravda EU',
      link: 'https://eu.news-pravda.com/world/2025/11/09/129808.html',
      pubDate: new Date('2025-11-09').toISOString()
    },
    {
      title: 'Two trains collide near Bratislava; minister offers resignation',
      source: 'The Slovak Spectator',
      link: 'https://spectator.sme.sk/politics-and-society/c/two-trains-collide-near-bratislava-minister-offers-to-resign-but-fico-refuses',
      pubDate: new Date('2025-11-07').toISOString()
    },
    {
      title: 'Fico government abolishes Velvet Revolution holiday',
      source: 'Index on Censorship',
      link: 'https://www.indexoncensorship.org/2025/11/the-dissident-family-challenging-slovakias-robert-fico/',
      pubDate: new Date('2025-11-17').toISOString()
    },
    {
      title: 'Opposition calls no-confidence vote against Fico government',
      source: 'US News',
      link: 'https://www.usnews.com/news/world/articles/2025-01-14/slovak-opposition-parties-to-call-no-confidence-vote-against-pm-ficos-government',
      pubDate: new Date('2025-01-14').toISOString()
    },
    {
      title: 'Slovakia against "reparative loan" to Ukraine from seized assets',
      source: 'Pravda Hungary',
      link: 'https://hungary.news-pravda.com/en/world/2025/11/11/26363.html',
      pubDate: new Date('2025-11-11').toISOString()
    },
    {
      title: 'Fico government tightens rules on NGOs with foreign funding',
      source: 'Index on Censorship',
      link: 'https://www.indexoncensorship.org/2025/11/the-dissident-family-challenging-slovakias-robert-fico/',
      pubDate: new Date('2025-03-01').toISOString()
    },
    {
      title: 'Thousands of Slovaks protest against Russia-friendly government',
      source: 'Euronews',
      link: 'https://www.euronews.com/video/2025/03/08/thousands-of-slovaks-protest-against-populist-pm-robert-fico-and-his-pro-russian-policies',
      pubDate: new Date('2025-03-08').toISOString()
    },
    {
      title: 'Slovaks protest economic policies and democratic backsliding',
      source: 'ABC News',
      link: 'https://abcnews.go.com/International/wireStory/slovaks-hold-nationwide-protests-economic-policies-populist-pm-125864126',
      pubDate: new Date('2025-11-01').toISOString()
    }
  ]),
  storyCount: 18
}

async function addSlovakia() {
  console.log('Adding Slovakia to database...\n')

  try {
    const result = await prisma.locationSummary.upsert({
      where: {
        name_type_category: {
          name: SLOVAKIA_SUMMARY.name,
          type: SLOVAKIA_SUMMARY.type,
          category: 'all'
        }
      },
      create: {
        name: SLOVAKIA_SUMMARY.name,
        type: SLOVAKIA_SUMMARY.type,
        country: SLOVAKIA_SUMMARY.country,
        lat: SLOVAKIA_SUMMARY.lat,
        lng: SLOVAKIA_SUMMARY.lng,
        category: 'all',
        summary: SLOVAKIA_SUMMARY.summary,
        issues: SLOVAKIA_SUMMARY.issues,
        topStories: SLOVAKIA_SUMMARY.topStories,
        storyCount: SLOVAKIA_SUMMARY.storyCount,
        updatedAt: new Date()
      },
      update: {
        summary: SLOVAKIA_SUMMARY.summary,
        issues: SLOVAKIA_SUMMARY.issues,
        topStories: SLOVAKIA_SUMMARY.topStories,
        storyCount: SLOVAKIA_SUMMARY.storyCount,
        updatedAt: new Date()
      }
    })

    console.log('✅ Slovakia added/updated successfully')
    console.log('   ID:', result.id)
    console.log('   Name:', result.name)
    console.log('   Location:', `${result.lat}, ${result.lng}`)
    console.log('   Issues:', JSON.parse(result.issues).length)
    console.log('   Stories:', JSON.parse(result.topStories).length)
    console.log()
  } catch (error) {
    console.error('❌ Error processing Slovakia:', error)
    throw error
  }
}

addSlovakia()
  .catch(console.error)
  .finally(() => prisma.$disconnect())
