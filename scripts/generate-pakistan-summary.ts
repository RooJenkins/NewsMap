import 'dotenv/config'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

// Pakistan location details
const PAKISTAN = {
  name: 'Pakistan',
  type: 'country',
  lat: 30.3753,
  lng: 69.3451,
  country: 'Pakistan'
}

// Comprehensive Pakistan summary based on November 2025 research
const PAKISTAN_SUMMARY = `# Pakistan

If you thought Pakistan's political melodrama peaked in 2023 when they tossed Imran Khan behind bars, think again. As November 2025 rolls around, the country is caught in a perfect storm: Khan's still in prison and still pulling strings, the capital just witnessed its deadliest attack since 2008, inflation is climbing back toward crisis levels, and the nuclear-armed rivalry with India has reignited after twin bombings in Islamabad and New Delhi. Meanwhile, the economy limps along on IMF life support, desperately hoping the next loan tranche arrives before the rupee collapses entirely. Welcome to Pakistan, where the crisis never ends—it just changes costumes.

## Major Issues

### 1. Imran Khan's Endless Imprisonment—And His Leverage From Behind Bars

**What's happening:**
- Imran Khan has been imprisoned since August 2023 at Adiala Jail on corruption charges (the infamous £190 million Al-Qadir Trust case) and faces Anti-Terrorism Act charges related to the May 9, 2023 protests that saw PTI supporters torch military installations.
- As of December 2024, a staggering 186 cases have been filed against Khan across Pakistan—a legal tsunami clearly designed to keep him sidelined indefinitely.
- Yet from his cell, Khan continues to play political chess. On November 10, 2025, he once again invited the "establishment" (Pakistan's euphemism for the military) to negotiate, citing external security threats, rising terrorism, and economic collapse. His party, Pakistan Tehreek-e-Insaf (PTI), withdrew from government negotiations in late January 2025, deepening the political deadlock.
- Prime Minister Shehbaz Sharif withdrew a proposed immunity clause that would have granted him presidential-level protections—a move widely interpreted as a signal that Khan's fate has no bearing on the government's legal maneuvering.

**Why it matters:**
- Khan remains Pakistan's most popular politician. His imprisonment hasn't diminished his base; if anything, it's galvanized them. Any early election would likely see PTI surge—which is precisely why the establishment won't allow it.
- The political paralysis is toxic for governance. With the government focused on neutralizing Khan rather than fixing Pakistan's crises, critical reforms stall, investor confidence evaporates, and the country drifts.
- Khan's remittance war strategy—urging overseas Pakistanis to send money through informal channels to starve the government of foreign exchange—has cost Islamabad billions. This isn't just political theater; it's economic warfare.

**Prospects:**
- Khan isn't getting out anytime soon. The military and government have too much invested in keeping him locked up. Expect more cases, more delays, and more legal acrobatics.
- PTI's boycott of negotiations means the deadlock continues. The party's best bet is to hold out for early elections, but the government has zero incentive to call them.
- The longer this drags on, the more Pakistan's institutional credibility erodes. International observers increasingly view the judicial persecution of Khan as politically motivated, damaging Pakistan's reputation with key partners like the US and UK.

### 2. The Return of Terrorism—And the Islamabad Suicide Bombing That Changed Everything

**What's happening:**
- On November 11, 2025, a suicide bomber detonated explosives outside a court building in Islamabad, killing 12 people and wounding 20. It was the deadliest attack in the capital since 2008, shattering the illusion that Islamabad was secure.
- Jamaat-ul-Ahrar, a breakaway faction of the Pakistani Taliban (TTP), claimed responsibility. This wasn't a random target—it was a deliberate strike at Pakistan's judicial system in the heavily fortified capital.
- Just hours earlier, on November 10, militants attempted to take cadets hostage at an army-run college in northwestern Pakistan. Security forces foiled the attack, but the brazenness rattled the country.
- Pakistan has been in a "state of war" since the Afghan Taliban swept Kabul in August 2021. Most attacks are carried out by TTP and Baloch separatist groups, with over 90% of fatalities concentrated in Balochistan and Khyber Pakhtunkhwa—the two provinces bordering Afghanistan.
- Peace talks between Pakistan and Afghanistan collapsed in Istanbul in early November, leaving Islamabad with no diplomatic off-ramp to the violence.

**Why it matters:**
- The Islamabad bombing punctured Pakistan's security myth. If militants can strike the capital with impunity, nowhere is safe. This undermines investor confidence, tourism, and Pakistan's image as a stable nuclear power.
- Pakistan's Defense Minister declared the country is in a "state of war"—yet the government lacks a coherent counterterrorism strategy. The military is stretched thin, fighting insurgents on multiple fronts while also propping up the political order against Khan's supporters.
- The TTP resurgence is a direct consequence of the Afghan Taliban's victory. Emboldened by their Kabul allies, TTP fighters now operate with greater freedom across the border, using Afghanistan as a sanctuary.

**Prospects:**
- Expect more attacks. TTP has momentum, and Pakistan's security apparatus is reactive, not proactive. The Baloch insurgency is also intensifying, with separatists targeting Chinese infrastructure projects under the Belt and Road Initiative.
- The Afghan Taliban won't crack down on TTP. Despite Pakistan's decades of support for the Taliban, Kabul now sees Islamabad as a meddling neighbor and refuses to cooperate on counterterrorism.
- Pakistan may escalate military operations in the tribal areas, but without addressing the root causes—economic deprivation, governance failures, and alienation of Pashtun and Baloch populations—this will remain a never-ending war.

### 3. India-Pakistan Tensions Explode After Twin Capital Bombings

**What's happening:**
- On November 10, 2025, an explosion in a moving car in New Delhi killed at least eight people. The next day, the Islamabad suicide bombing killed 12. Two nuclear-armed capitals attacked within 24 hours—and the finger-pointing began immediately.
- Pakistan's Prime Minister Shehbaz Sharif directly blamed India for the Islamabad attack, claiming "Indian-sponsored terrorist proxies" operating from Afghanistan were responsible. India's foreign ministry denied the accusation outright.
- This comes months after the deadliest India-Pakistan clash in decades. On April 22, 2025, an attack in Pahalgam, Kashmir, killed 26 civilians, mostly Indian tourists. The four-day armed conflict that followed left hundreds dead.
- Military intelligence confirms Pakistan moved armored divisions toward the Punjab and Sindh borders on November 12, 2025. Indian police conducted coordinated raids in Jammu and Kashmir, Uttar Pradesh, and Haryana, arresting seven individuals linked to Pakistan-based militant groups Jaish-e-Mohammad and Ansar Ghazwat-ul-Hind. They seized firearms and nearly 3,000kg of bomb-making materials.

**Why it matters:**
- India and Pakistan are edging closer to open conflict. Both countries possess nuclear weapons. The risk of miscalculation is terrifyingly high.
- The Kashmir region remains a tinderbox. India's 2019 revocation of Kashmir's autonomy inflamed tensions, and Pakistan-backed militants continue cross-border attacks. Every incident risks spiraling into full-scale war.
- The international community is watching nervously. The US, UK, and China have all urged restraint, but neither side is backing down. Pakistan accuses India of state-sponsored terrorism; India accuses Pakistan of harboring jihadist groups. Both are partially correct.

**Prospects:**
- The next few weeks are critical. If more attacks occur, India may conduct surgical strikes or airstrikes inside Pakistan, triggering a military escalation.
- Pakistan's military mobilization signals it's preparing for conflict. Whether this is defensive posturing or pre-emptive positioning remains unclear, but the troop movements are real.
- Diplomatic channels are frozen. With Pakistan's government focused on domestic survival and India's Modi administration taking a hardline stance, there's no appetite for dialogue. The risk of war—including nuclear war—is the highest it's been since the 2019 Pulwama-Balakot crisis.

### 4. The Economy: Stagflation, IMF Dependency, and the Rupee's Slow-Motion Collapse

**What's happening:**
- Inflation jumped to 6.2% year-on-year in October 2025, the highest in a year. This marks a sharp reversal after inflation plummeted to a historic low of 0.3% in April 2025.
- On November 11, Pakistan hiked fuel prices again: petrol now costs PKR 265.45 per litre (up PKR 2.43), and high-speed diesel hit PKR 278.44 (up PKR 3.02). Surging food prices—driven by devastating monsoon floods and supply disruptions from the Afghanistan conflict—are hammering ordinary Pakistanis.
- The IMF's Extended Fund Facility (EFF) is Pakistan's lifeline. In May 2025, the IMF approved the first review, allowing a $1 billion disbursement (bringing total disbursements to $2.1 billion). But delays in the next tranche have spooked markets, fueling fears of rupee devaluation.
- The State Bank of Pakistan kept the policy rate at 11%, hoping to anchor inflation within the 5-7% target. But with broad money supply hitting PKR 40.8 trillion by June 2025—over PKR 10.6 trillion in cash circulation—and energy sector circular debt climbing to PKR 1.7 trillion, the central bank is fighting a losing battle.

**Why it matters:**
- Pakistan's economy is structurally broken. It relies on IMF bailouts, remittances, and Chinese loans to stay afloat. Without fundamental reforms—tax expansion, energy sector restructuring, and privatization of state-owned enterprises—the cycle will continue.
- The rupee is under constant pressure. Khan's remittance boycott strategy has cost Pakistan billions in foreign exchange, exacerbating the currency crisis. Any delay in the next IMF tranche could trigger a sharp devaluation.
- Pakistan risks losing its preferential trade status with the EU, a move that would devastate the textile sector—the backbone of Pakistan's export economy. The EU is growing frustrated with Pakistan's governance failures and human rights record.

**Prospects:**
- The IMF will keep Pakistan on life support, but the conditions will get tougher. Expect more fuel price hikes, tax increases, and austerity measures that fuel public anger.
- Economic growth projections are bleak. With political instability, security threats, and a hostile India, investors are staying away. Foreign direct investment (FDI) remains anemic.
- The long-term outlook is grim unless Pakistan undertakes painful structural reforms—which the current government lacks the political capital to implement. The economy will muddle through, but the risk of a full-blown financial crisis remains ever-present.

## The International Angle

Pakistan's crises don't stay local—they ripple outward, and the world is paying attention. China, Pakistan's "all-weather ally," is growing anxious about security threats to Belt and Road projects, particularly in Balochistan where separatists have targeted Chinese workers. Beijing continues to bankroll Pakistan, but it's demanding tighter security and tangible economic returns.

The United States is frustrated. Washington provided Pakistan with decades of military aid and diplomatic cover, yet TTP continues to operate, Afghan Taliban fighters find safe haven across the border, and Pakistan's nuclear arsenal remains a proliferation risk. The US-backed Regional Economic Integration Framework (REIF) for the DRC-Rwanda conflict shows America's priorities are shifting toward Africa and away from South Asia's intractable disputes.

The Gulf states, particularly Saudi Arabia and the UAE, are recalibrating their relationship with Pakistan. Once generous benefactors, they now expect economic reforms and security guarantees before opening their wallets. The days of blank-check diplomacy are over.

And then there's Afghanistan. The Taliban's victory in 2021 was supposed to be Pakistan's strategic win—finally, a friendly government in Kabul. Instead, it's become a nightmare. The Afghan Taliban refuses to crack down on TTP, accuses Pakistan of meddling in Afghan affairs, and provides sanctuary for militants attacking Pakistani targets. The failed Istanbul peace talks in early November 2025 underscore just how badly Pakistan's Afghanistan strategy has backfired.

## The Bottom Line

Pakistan is trapped in a downward spiral: political paralysis, economic stagnation, resurgent terrorism, and a nuclear standoff with India. Imran Khan won't be released, the government won't call early elections, and the military won't relinquish its stranglehold on power. The Islamabad bombing shattered any illusion of security, and the twin capital attacks have pushed India-Pakistan tensions to the brink.

The economy limps forward on IMF loans, but without reforms, it's only a matter of time before the next crisis hits. And with the rupee under pressure, inflation rising, and fuel prices climbing, ordinary Pakistanis are bearing the brunt of their leaders' failures.

Watch the India-Pakistan border closely. If another major attack occurs, this could escalate beyond anyone's control. Watch the IMF negotiations—any delay in the next tranche could trigger a currency collapse. And watch Khan's endgame: his supporters aren't going away, and sooner or later, Pakistan's political reckoning will come. Whether it arrives through elections, protests, or something far messier remains the million-dollar question.`

const ISSUES = [
  "Imran Khan's Endless Imprisonment—And His Leverage From Behind Bars",
  "The Return of Terrorism—And the Islamabad Suicide Bombing That Changed Everything",
  "India-Pakistan Tensions Explode After Twin Capital Bombings",
  "The Economy: Stagflation, IMF Dependency, and the Rupee's Slow-Motion Collapse"
]

const TOP_STORIES: any[] = []

async function generatePakistanSummary() {
  console.log('Generating Pakistan country summary...\n')

  try {
    // Store in database
    await prisma.locationSummary.upsert({
      where: {
        name_type_category: {
          name: PAKISTAN.name,
          type: PAKISTAN.type,
          category: 'all'
        }
      },
      create: {
        name: PAKISTAN.name,
        type: PAKISTAN.type,
        country: PAKISTAN.country,
        lat: PAKISTAN.lat,
        lng: PAKISTAN.lng,
        category: 'all',
        summary: PAKISTAN_SUMMARY,
        issues: JSON.stringify(ISSUES),
        topStories: JSON.stringify(TOP_STORIES),
        storyCount: 0,
        updatedAt: new Date()
      },
      update: {
        summary: PAKISTAN_SUMMARY,
        issues: JSON.stringify(ISSUES),
        topStories: JSON.stringify(TOP_STORIES),
        storyCount: 0,
        updatedAt: new Date()
      }
    })

    console.log('✅ Pakistan summary generated and saved to database!')
    console.log(`\nCharacter count: ${PAKISTAN_SUMMARY.length}`)
    console.log(`Issues extracted: ${ISSUES.length}`)
    console.log('\nPreview:')
    console.log(PAKISTAN_SUMMARY.substring(0, 500) + '...\n')

  } catch (error) {
    console.error('❌ Failed to generate Pakistan summary:', error)
    throw error
  }
}

generatePakistanSummary()
  .catch(console.error)
  .finally(() => prisma.$disconnect())
